import React from "react"; import { View, Text, ActivityIndicator, Button } from "react-native"; import EmptyState from "../../components/EmptyState"; import NotEntitledScreen from "../common/NotEntitledScreen"; import { useEntitlements } from "@/entitlements"; import { useStorefront } from "../../hooks/useStorefront";  export default function StorefrontScreen({ navigation }: any) {   const { capabilities } = useEntitlements();    // Strict capability gate   if (!capabilities?.commercial) return <NotEntitledScreen />;    const { data, isLoading, error, refetch } = useStorefront();    if (isLoading) {     return (       <View style={{ flex: 1, alignItems: "center", justifyContent: "center" }}>         <ActivityIndicator size="large" />       </View>     );   }    if (error) {     return (       <View style={{ flex: 1, padding: 16, justifyContent: "center" }}>         <Text style={{ fontSize: 18, fontWeight: "600", marginBottom: 8 }}>           Couldn’t load storefront         </Text>         <Text style={{ marginBottom: 12 }}>           Please check your connection and try again.         </Text>         <Button title="Retry" onPress={() => refetch()} />       </View>     );   }    // Treat null/undefined as “no storefront”   if (!data) {     return (       <EmptyState         title="No storefront yet"         description="Create your storefront to publish products and start accepting orders."         actionLabel="Create your storefront"         onAction={() => navigation?.navigate?.("CreateStorefront")}       />     );   }    // Success state (simple, real, shippable)   return (     <View style={{ flex: 1, padding: 16 }}>       <Text style={{ fontSize: 20, fontWeight: "700" }}>         {data.name || "Your Storefront"}       </Text>       <Text style={{ marginTop: 8 }}>         Status: {data.isPublished ? "Published" : "Draft"}       </Text>        <View style={{ marginTop: 16 }}>         <Button           title="Edit Storefront"           onPress={() => navigation?.navigate?.("EditStorefront")}         />       </View>        <View style={{ marginTop: 12 }}>         <Button           title="Manage Products"           onPress={() => navigation?.navigate?.("CommercialInventory")}         />       </View>     </View>   ); }