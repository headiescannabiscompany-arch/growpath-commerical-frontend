{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { followUser, unfollowUser, isFollowing } from \"../api/users\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function FollowButton(_ref) {\n  var userId = _ref.userId;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    following = _useState2[0],\n    setFollowing = _useState2[1];\n  useEffect(function () {\n    var mounted = true;\n    function load() {\n      return _load.apply(this, arguments);\n    }\n    function _load() {\n      _load = _asyncToGenerator(function* () {\n        try {\n          var _res$data$isFollowing, _res$data, _res$isFollowing;\n          var res = yield isFollowing(userId);\n          var val = (_res$data$isFollowing = (_res$data = res.data) == null ? void 0 : _res$data.isFollowing) != null ? _res$data$isFollowing : (_res$isFollowing = res.isFollowing) != null ? _res$isFollowing : false;\n          if (mounted) setFollowing(!!val);\n        } catch (err) {}\n      });\n      return _load.apply(this, arguments);\n    }\n    load();\n    return function () {\n      return mounted = false;\n    };\n  }, [userId]);\n  function toggle() {\n    return _toggle.apply(this, arguments);\n  }\n  function _toggle() {\n    _toggle = _asyncToGenerator(function* () {\n      try {\n        if (following) {\n          yield unfollowUser(userId);\n          setFollowing(false);\n        } else {\n          yield followUser(userId);\n          setFollowing(true);\n        }\n      } catch (err) {}\n    });\n    return _toggle.apply(this, arguments);\n  }\n  return _jsx(TouchableOpacity, {\n    onPress: toggle,\n    style: {\n      paddingHorizontal: 12,\n      paddingVertical: 6,\n      borderRadius: 8,\n      backgroundColor: following ? \"#ddd\" : \"#2ecc71\"\n    },\n    children: _jsx(Text, {\n      style: {\n        color: following ? \"#333\" : \"white\",\n        fontWeight: \"600\"\n      },\n      children: following ? \"Following\" : \"Follow\"\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","TouchableOpacity","Text","followUser","unfollowUser","isFollowing","jsx","_jsx","FollowButton","_ref","userId","_useState","_useState2","_slicedToArray","following","setFollowing","mounted","load","_load","apply","arguments","_asyncToGenerator","_res$data$isFollowing","_res$data","_res$isFollowing","res","val","data","err","toggle","_toggle","onPress","style","paddingHorizontal","paddingVertical","borderRadius","backgroundColor","children","color","fontWeight"],"sources":["C:/GrowPathAI-UI/src/components/FollowButton.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { TouchableOpacity, Text } from \"react-native\";\r\nimport { followUser, unfollowUser, isFollowing } from \"../api/users\";\r\n\r\nexport default function FollowButton({ userId }) {\r\n  const [following, setFollowing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await isFollowing(userId);\r\n        // api returns { isFollowing }\r\n        const val = res.data?.isFollowing ?? (res.isFollowing ?? false);\r\n        if (mounted) setFollowing(!!val);\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n    load();\r\n    return () => (mounted = false);\r\n  }, [userId]);\r\n\r\n  async function toggle() {\r\n    try {\r\n      if (following) {\r\n        await unfollowUser(userId);\r\n        setFollowing(false);\r\n      } else {\r\n        await followUser(userId);\r\n        setFollowing(true);\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      onPress={toggle}\r\n      style={{\r\n        paddingHorizontal: 12,\r\n        paddingVertical: 6,\r\n        borderRadius: 8,\r\n        backgroundColor: following ? \"#ddd\" : \"#2ecc71\"\r\n      }}\r\n    >\r\n      <Text style={{ color: following ? \"#333\" : \"white\", fontWeight: \"600\" }}>\r\n        {following ? \"Following\" : \"Follow\"}\r\n      </Text>\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,gBAAA;AAAA,OAAAC,IAAA;AAEnD,SAASC,UAAU,EAAEC,YAAY,EAAEC,WAAW;AAAuB,SAAAC,GAAA,IAAAC,IAAA;AAErE,eAAe,SAASC,YAAYA,CAAAC,IAAA,EAAa;EAAA,IAAVC,MAAM,GAAAD,IAAA,CAANC,MAAM;EAC3C,IAAAC,SAAA,GAAkCX,QAAQ,CAAC,KAAK,CAAC;IAAAY,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA1CG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAE9Bb,SAAS,CAAC,YAAM;IACd,IAAIiB,OAAO,GAAG,IAAI;IAAC,SACJC,IAAIA,CAAA;MAAA,OAAAC,KAAA,CAAAC,KAAA,OAAAC,SAAA;IAAA;IAAA,SAAAF,MAAA;MAAAA,KAAA,GAAAG,iBAAA,CAAnB,aAAsB;QACpB,IAAI;UAAA,IAAAC,qBAAA,EAAAC,SAAA,EAAAC,gBAAA;UACF,IAAMC,GAAG,SAASpB,WAAW,CAACK,MAAM,CAAC;UAErC,IAAMgB,GAAG,IAAAJ,qBAAA,IAAAC,SAAA,GAAGE,GAAG,CAACE,IAAI,qBAARJ,SAAA,CAAUlB,WAAW,YAAAiB,qBAAA,IAAAE,gBAAA,GAAKC,GAAG,CAACpB,WAAW,YAAAmB,gBAAA,GAAI,KAAM;UAC/D,IAAIR,OAAO,EAAED,YAAY,CAAC,CAAC,CAACW,GAAG,CAAC;QAClC,CAAC,CAAC,OAAOE,GAAG,EAAE,CAEd;MACF,CAAC;MAAA,OAAAV,KAAA,CAAAC,KAAA,OAAAC,SAAA;IAAA;IACDH,IAAI,CAAC,CAAC;IACN,OAAO;MAAA,OAAOD,OAAO,GAAG,KAAK;IAAA,CAAC;EAChC,CAAC,EAAE,CAACN,MAAM,CAAC,CAAC;EAAC,SAEEmB,MAAMA,CAAA;IAAA,OAAAC,OAAA,CAAAX,KAAA,OAAAC,SAAA;EAAA;EAAA,SAAAU,QAAA;IAAAA,OAAA,GAAAT,iBAAA,CAArB,aAAwB;MACtB,IAAI;QACF,IAAIP,SAAS,EAAE;UACb,MAAMV,YAAY,CAACM,MAAM,CAAC;UAC1BK,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,MAAM;UACL,MAAMZ,UAAU,CAACO,MAAM,CAAC;UACxBK,YAAY,CAAC,IAAI,CAAC;QACpB;MACF,CAAC,CAAC,OAAOa,GAAG,EAAE,CAEd;IACF,CAAC;IAAA,OAAAE,OAAA,CAAAX,KAAA,OAAAC,SAAA;EAAA;EAED,OACEb,IAAA,CAACN,gBAAgB;IACf8B,OAAO,EAAEF,MAAO;IAChBG,KAAK,EAAE;MACLC,iBAAiB,EAAE,EAAE;MACrBC,eAAe,EAAE,CAAC;MAClBC,YAAY,EAAE,CAAC;MACfC,eAAe,EAAEtB,SAAS,GAAG,MAAM,GAAG;IACxC,CAAE;IAAAuB,QAAA,EAEF9B,IAAA,CAACL,IAAI;MAAC8B,KAAK,EAAE;QAAEM,KAAK,EAAExB,SAAS,GAAG,MAAM,GAAG,OAAO;QAAEyB,UAAU,EAAE;MAAM,CAAE;MAAAF,QAAA,EACrEvB,SAAS,GAAG,WAAW,GAAG;IAAQ,CAC/B;EAAC,CACS,CAAC;AAEvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}