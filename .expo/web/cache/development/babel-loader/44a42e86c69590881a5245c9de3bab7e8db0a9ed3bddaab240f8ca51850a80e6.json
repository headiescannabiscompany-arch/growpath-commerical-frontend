{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useLayoutEffect, useState } from 'react';\nimport { addNotificationResponseReceivedListener, addNotificationResponseClearedListener, getLastNotificationResponse } from \"./NotificationsEmitter\";\nexport default function useLastNotificationResponse() {\n  var _useState = useState(undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    lastNotificationResponse = _useState2[0],\n    setLastNotificationResponse = _useState2[1];\n  useLayoutEffect(function () {\n    var response = getLastNotificationResponse();\n    setLastNotificationResponse(function (prevResponse) {\n      return determineNextResponse(prevResponse, response);\n    });\n    var subscription = addNotificationResponseReceivedListener(function (response) {\n      return setLastNotificationResponse(function (prevResponse) {\n        return determineNextResponse(prevResponse, response);\n      });\n    });\n    var clearResponseSubscription = addNotificationResponseClearedListener(function () {\n      setLastNotificationResponse(null);\n    });\n    return function () {\n      subscription.remove();\n      clearResponseSubscription.remove();\n    };\n  }, []);\n  return lastNotificationResponse;\n}\nexport var determineNextResponse = function determineNextResponse(prevResponse, newResponse) {\n  if (!newResponse) {\n    return null;\n  }\n  if (!prevResponse) {\n    return newResponse;\n  }\n  return prevResponse.notification.request.identifier !== newResponse.notification.request.identifier ? newResponse : prevResponse;\n};","map":{"version":3,"names":["useLayoutEffect","useState","addNotificationResponseReceivedListener","addNotificationResponseClearedListener","getLastNotificationResponse","useLastNotificationResponse","_useState","undefined","_useState2","_slicedToArray","lastNotificationResponse","setLastNotificationResponse","response","prevResponse","determineNextResponse","subscription","clearResponseSubscription","remove","newResponse","notification","request","identifier"],"sources":["C:\\GrowPathAI-UI\\node_modules\\expo-notifications\\src\\useLastNotificationResponse.ts"],"sourcesContent":["import { useLayoutEffect, useState } from 'react';\n\nimport { MaybeNotificationResponse, NotificationResponse } from './Notifications.types';\nimport {\n  addNotificationResponseReceivedListener,\n  addNotificationResponseClearedListener,\n  getLastNotificationResponse,\n} from './NotificationsEmitter';\n\n/**\n * A React hook which returns the notification response that was received most recently\n * (a notification response designates an interaction with a notification, such as tapping on it).\n *\n * To clear the last notification response, use [`clearLastNotificationResponseAsync()`](#notificationsclearlastnotificationresponseasync).\n *\n * > If you don't want to use a hook, you can use `Notifications.getLastNotificationResponseAsync()` instead.\n *\n * @return The hook may return one of these three types/values:\n * - `undefined` - until we're sure of what to return,\n * - `null` - if no notification response has been received yet,\n * - a [`NotificationResponse`](#notificationresponse) object - if a notification response was received.\n *\n * @example\n * Responding to a notification tap by opening a URL that could be put into the notification's `data`\n * (opening the URL is your responsibility and is not a part of the `expo-notifications` API):\n * ```jsx\n * import * as Notifications from 'expo-notifications';\n * import { Linking } from 'react-native';\n *\n * export default function App() {\n *   const lastNotificationResponse = Notifications.useLastNotificationResponse();\n *   React.useEffect(() => {\n *     if (\n *       lastNotificationResponse &&\n *       lastNotificationResponse.notification.request.content.data.url &&\n *       lastNotificationResponse.actionIdentifier === Notifications.DEFAULT_ACTION_IDENTIFIER\n *     ) {\n *       Linking.openURL(lastNotificationResponse.notification.request.content.data.url);\n *     }\n *   }, [lastNotificationResponse]);\n *   return (\n *     // Your app content\n *   );\n * }\n * ```\n * @header listen\n */\nexport default function useLastNotificationResponse() {\n  const [lastNotificationResponse, setLastNotificationResponse] =\n    useState<MaybeNotificationResponse>(undefined);\n\n  // useLayoutEffect ensures the listener is registered as soon as possible\n  useLayoutEffect(() => {\n    // Get the last response first, in case it was set earlier (even in native code on startup)\n    const response = getLastNotificationResponse();\n    setLastNotificationResponse((prevResponse) => determineNextResponse(prevResponse, response));\n\n    // Set up listener for responses that come in, and set the last response if needed\n    const subscription = addNotificationResponseReceivedListener((response) =>\n      setLastNotificationResponse((prevResponse) => determineNextResponse(prevResponse, response))\n    );\n    const clearResponseSubscription = addNotificationResponseClearedListener(() => {\n      setLastNotificationResponse(null);\n    });\n    return () => {\n      subscription.remove();\n      clearResponseSubscription.remove();\n    };\n  }, []);\n\n  return lastNotificationResponse;\n}\n\n// returns the new response if it is different from the previous,\n// also has to return undefined until we're sure of what to return (null or a response)\n// the transition from response to null is invalid\nexport const determineNextResponse = (\n  prevResponse: MaybeNotificationResponse,\n  newResponse: NotificationResponse | null\n) => {\n  if (!newResponse) {\n    return null;\n  }\n  if (!prevResponse) {\n    return newResponse;\n  }\n  return prevResponse.notification.request.identifier !==\n    newResponse.notification.request.identifier\n    ? newResponse\n    : prevResponse;\n};\n"],"mappings":";AAAA,SAASA,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AAGjD,SACEC,uCAAuC,EACvCC,sCAAsC,EACtCC,2BAA2B;AAyC7B,eAAc,SAAUC,2BAA2BA,CAAA;EACjD,IAAAC,SAAA,GACEL,QAAQ,CAA4BM,SAAS,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IADzCI,wBAAwB,GAAAF,UAAA;IAAEG,2BAA2B,GAAAH,UAAA;EAI5DR,eAAe,CAAC,YAAK;IAEnB,IAAMY,QAAQ,GAAGR,2BAA2B,EAAE;IAC9CO,2BAA2B,CAAC,UAACE,YAAY;MAAA,OAAKC,qBAAqB,CAACD,YAAY,EAAED,QAAQ,CAAC;IAAA,EAAC;IAG5F,IAAMG,YAAY,GAAGb,uCAAuC,CAAC,UAACU,QAAQ;MAAA,OACpED,2BAA2B,CAAC,UAACE,YAAY;QAAA,OAAKC,qBAAqB,CAACD,YAAY,EAAED,QAAQ,CAAC;MAAA,EAAC;IAAA,EAC7F;IACD,IAAMI,yBAAyB,GAAGb,sCAAsC,CAAC,YAAK;MAC5EQ,2BAA2B,CAAC,IAAI,CAAC;IACnC,CAAC,CAAC;IACF,OAAO,YAAK;MACVI,YAAY,CAACE,MAAM,EAAE;MACrBD,yBAAyB,CAACC,MAAM,EAAE;IACpC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOP,wBAAwB;AACjC;AAKA,OAAO,IAAMI,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAChCD,YAAuC,EACvCK,WAAwC,EACtC;EACF,IAAI,CAACA,WAAW,EAAE;IAChB,OAAO,IAAI;EACb;EACA,IAAI,CAACL,YAAY,EAAE;IACjB,OAAOK,WAAW;EACpB;EACA,OAAOL,YAAY,CAACM,YAAY,CAACC,OAAO,CAACC,UAAU,KACjDH,WAAW,CAACC,YAAY,CAACC,OAAO,CAACC,UAAU,GACzCH,WAAW,GACXL,YAAY;AAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}