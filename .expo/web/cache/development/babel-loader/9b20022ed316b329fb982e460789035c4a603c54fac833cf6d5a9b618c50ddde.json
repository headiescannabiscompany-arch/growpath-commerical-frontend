{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nvar Notifications;\nvar Device;\nif (Platform.OS !== \"web\") {\n  Notifications = require(\"expo-notifications\");\n  Device = require(\"expo-device\");\n}\nexport function requestNotificationPermission() {\n  return _requestNotificationPermission.apply(this, arguments);\n}\nfunction _requestNotificationPermission() {\n  _requestNotificationPermission = _asyncToGenerator(function* () {\n    if (Platform.OS === \"web\") return false;\n    if (!Device.isDevice) return false;\n    var _yield$Notifications$ = yield Notifications.getPermissionsAsync(),\n      status = _yield$Notifications$.status;\n    if (status !== \"granted\") {\n      var result = yield Notifications.requestPermissionsAsync();\n      return result.status === \"granted\";\n    }\n    return true;\n  });\n  return _requestNotificationPermission.apply(this, arguments);\n}\nexport function setupAndroidChannel() {\n  return _setupAndroidChannel.apply(this, arguments);\n}\nfunction _setupAndroidChannel() {\n  _setupAndroidChannel = _asyncToGenerator(function* () {\n    if (Platform.OS === \"android\") {\n      yield Notifications.setNotificationChannelAsync(\"reminders\", {\n        name: \"Grow Reminders\",\n        importance: Notifications.AndroidImportance.DEFAULT\n      });\n    }\n  });\n  return _setupAndroidChannel.apply(this, arguments);\n}\nexport function scheduleTaskReminder(_x) {\n  return _scheduleTaskReminder.apply(this, arguments);\n}\nfunction _scheduleTaskReminder() {\n  _scheduleTaskReminder = _asyncToGenerator(function* (task) {\n    var triggerDate = new Date(task.dueDate);\n    if (triggerDate <= new Date()) return;\n    return Notifications.scheduleNotificationAsync({\n      content: {\n        title: \"Grow task due\",\n        body: task.title,\n        sound: true\n      },\n      trigger: {\n        date: triggerDate,\n        channelId: \"reminders\"\n      }\n    });\n  });\n  return _scheduleTaskReminder.apply(this, arguments);\n}\nexport function cancelTaskReminder(_x2) {\n  return _cancelTaskReminder.apply(this, arguments);\n}\nfunction _cancelTaskReminder() {\n  _cancelTaskReminder = _asyncToGenerator(function* (notificationId) {\n    yield Notifications.cancelScheduledNotificationAsync(notificationId);\n  });\n  return _cancelTaskReminder.apply(this, arguments);\n}\nexport function canUseReminders(user) {\n  return user.role === \"paid\" || user.role === \"guild\";\n}","map":{"version":3,"names":["Notifications","Device","Platform","OS","require","requestNotificationPermission","_requestNotificationPermission","apply","arguments","_asyncToGenerator","isDevice","_yield$Notifications$","getPermissionsAsync","status","result","requestPermissionsAsync","setupAndroidChannel","_setupAndroidChannel","setNotificationChannelAsync","name","importance","AndroidImportance","DEFAULT","scheduleTaskReminder","_x","_scheduleTaskReminder","task","triggerDate","Date","dueDate","scheduleNotificationAsync","content","title","body","sound","trigger","date","channelId","cancelTaskReminder","_x2","_cancelTaskReminder","notificationId","cancelScheduledNotificationAsync","canUseReminders","user","role"],"sources":["C:/GrowPathAI-UI/src/utils/notifications.js"],"sourcesContent":["import { Platform } from \"react-native\";\n\nlet Notifications;\nlet Device;\n\nif (Platform.OS !== \"web\") {\n  Notifications = require(\"expo-notifications\");\n  Device = require(\"expo-device\");\n}\n\nexport async function requestNotificationPermission() {\n  if (Platform.OS === \"web\") return false;\n  if (!Device.isDevice) return false;\n  const { status } = await Notifications.getPermissionsAsync();\n  if (status !== \"granted\") {\n    const result = await Notifications.requestPermissionsAsync();\n    return result.status === \"granted\";\n  }\n  return true;\n}\n\nexport async function setupAndroidChannel() {\n  if (Platform.OS === \"android\") {\n    await Notifications.setNotificationChannelAsync(\"reminders\", {\n      name: \"Grow Reminders\",\n      importance: Notifications.AndroidImportance.DEFAULT\n    });\n  }\n}\n\nexport async function scheduleTaskReminder(task) {\n  const triggerDate = new Date(task.dueDate);\n  if (triggerDate <= new Date()) return;\n  return Notifications.scheduleNotificationAsync({\n    content: {\n      title: \"Grow task due\",\n      body: task.title,\n      sound: true\n    },\n    trigger: {\n      date: triggerDate,\n      channelId: \"reminders\"\n    }\n  });\n}\n\nexport async function cancelTaskReminder(notificationId) {\n  await Notifications.cancelScheduledNotificationAsync(notificationId);\n}\n\nexport function canUseReminders(user) {\n  return user.role === \"paid\" || user.role === \"guild\";\n}\n"],"mappings":";;AAEA,IAAIA,aAAa;AACjB,IAAIC,MAAM;AAEV,IAAIC,QAAQ,CAACC,EAAE,KAAK,KAAK,EAAE;EACzBH,aAAa,GAAGI,OAAO,CAAC,oBAAoB,CAAC;EAC7CH,MAAM,GAAGG,OAAO,CAAC,aAAa,CAAC;AACjC;AAEA,gBAAsBC,6BAA6BA,CAAA;EAAA,OAAAC,8BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AASlD,SAAAF,+BAAA;EAAAA,8BAAA,GAAAG,iBAAA,CATM,aAA+C;IACpD,IAAIP,QAAQ,CAACC,EAAE,KAAK,KAAK,EAAE,OAAO,KAAK;IACvC,IAAI,CAACF,MAAM,CAACS,QAAQ,EAAE,OAAO,KAAK;IAClC,IAAAC,qBAAA,SAAyBX,aAAa,CAACY,mBAAmB,CAAC,CAAC;MAApDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;IACd,IAAIA,MAAM,KAAK,SAAS,EAAE;MACxB,IAAMC,MAAM,SAASd,aAAa,CAACe,uBAAuB,CAAC,CAAC;MAC5D,OAAOD,MAAM,CAACD,MAAM,KAAK,SAAS;IACpC;IACA,OAAO,IAAI;EACb,CAAC;EAAA,OAAAP,8BAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBQ,mBAAmBA,CAAA;EAAA,OAAAC,oBAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAOxC,SAAAS,qBAAA;EAAAA,oBAAA,GAAAR,iBAAA,CAPM,aAAqC;IAC1C,IAAIP,QAAQ,CAACC,EAAE,KAAK,SAAS,EAAE;MAC7B,MAAMH,aAAa,CAACkB,2BAA2B,CAAC,WAAW,EAAE;QAC3DC,IAAI,EAAE,gBAAgB;QACtBC,UAAU,EAAEpB,aAAa,CAACqB,iBAAiB,CAACC;MAC9C,CAAC,CAAC;IACJ;EACF,CAAC;EAAA,OAAAL,oBAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBe,oBAAoBA,CAAAC,EAAA;EAAA,OAAAC,qBAAA,CAAAlB,KAAA,OAAAC,SAAA;AAAA;AAczC,SAAAiB,sBAAA;EAAAA,qBAAA,GAAAhB,iBAAA,CAdM,WAAoCiB,IAAI,EAAE;IAC/C,IAAMC,WAAW,GAAG,IAAIC,IAAI,CAACF,IAAI,CAACG,OAAO,CAAC;IAC1C,IAAIF,WAAW,IAAI,IAAIC,IAAI,CAAC,CAAC,EAAE;IAC/B,OAAO5B,aAAa,CAAC8B,yBAAyB,CAAC;MAC7CC,OAAO,EAAE;QACPC,KAAK,EAAE,eAAe;QACtBC,IAAI,EAAEP,IAAI,CAACM,KAAK;QAChBE,KAAK,EAAE;MACT,CAAC;MACDC,OAAO,EAAE;QACPC,IAAI,EAAET,WAAW;QACjBU,SAAS,EAAE;MACb;IACF,CAAC,CAAC;EACJ,CAAC;EAAA,OAAAZ,qBAAA,CAAAlB,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsB8B,kBAAkBA,CAAAC,GAAA;EAAA,OAAAC,mBAAA,CAAAjC,KAAA,OAAAC,SAAA;AAAA;AAEvC,SAAAgC,oBAAA;EAAAA,mBAAA,GAAA/B,iBAAA,CAFM,WAAkCgC,cAAc,EAAE;IACvD,MAAMzC,aAAa,CAAC0C,gCAAgC,CAACD,cAAc,CAAC;EACtE,CAAC;EAAA,OAAAD,mBAAA,CAAAjC,KAAA,OAAAC,SAAA;AAAA;AAED,OAAO,SAASmC,eAAeA,CAACC,IAAI,EAAE;EACpC,OAAOA,IAAI,CAACC,IAAI,KAAK,MAAM,IAAID,IAAI,CAACC,IAAI,KAAK,OAAO;AACtD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}