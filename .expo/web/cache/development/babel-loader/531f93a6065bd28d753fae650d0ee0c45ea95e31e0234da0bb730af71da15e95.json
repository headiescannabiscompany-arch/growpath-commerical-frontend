{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScreenContainer from \"../components/ScreenContainer\";\nimport { createPost } from \"../api/posts\";\nimport { useAuth } from \"../context/AuthContext.js\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ImagePicker;\nif (Platform.OS !== \"web\") {\n  ImagePicker = require(\"expo-image-picker\");\n}\nexport default function CreatePostScreen() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    text = _useState2[0],\n    setText = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    photos = _useState4[0],\n    setPhotos = _useState4[1];\n  var _useAuth = useAuth(),\n    isPro = _useAuth.isPro;\n  var navigation = useNavigation();\n  function pickImage() {\n    return _pickImage.apply(this, arguments);\n  }\n  function _pickImage() {\n    _pickImage = _asyncToGenerator(function* () {\n      if (Platform.OS === \"web\") return;\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        allowsMultipleSelection: true\n      });\n      if (!result.canceled) {\n        setPhotos(function (prev) {\n          return [].concat(_toConsumableArray(prev), _toConsumableArray(result.assets.map(function (a) {\n            return a.uri;\n          })));\n        });\n      }\n    });\n    return _pickImage.apply(this, arguments);\n  }\n  function submit() {\n    return _submit.apply(this, arguments);\n  }\n  function _submit() {\n    _submit = _asyncToGenerator(function* () {\n      var form = new FormData();\n      form.append(\"text\", text);\n      for (var photo of photos) {\n        if (Platform.OS === \"web\") {\n          var response = yield fetch(photo);\n          var blob = yield response.blob();\n          form.append(\"photos\", blob, photo.fileName || `photo.jpg`);\n        } else {\n          form.append(\"photos\", {\n            uri: photo,\n            name: `photo_${photos.indexOf(photo)}.jpg`,\n            type: \"image/jpeg\"\n          });\n        }\n      }\n      yield createPost(form);\n      navigation.goBack();\n    });\n    return _submit.apply(this, arguments);\n  }\n  return _jsxs(ScreenContainer, {\n    children: [_jsx(Text, {\n      style: {\n        fontSize: 22,\n        fontWeight: \"700\"\n      },\n      children: \"Create Post\"\n    }), _jsx(TextInput, {\n      placeholder: \"Say something about your grow...\",\n      multiline: true,\n      value: text,\n      onChangeText: setText,\n      style: {\n        marginTop: 12,\n        padding: 10,\n        backgroundColor: \"#eee\",\n        borderRadius: 8,\n        height: 120\n      },\n      editable: isPro\n    }), Platform.OS === \"web\" ? _jsx(View, {\n      style: {\n        marginTop: 12,\n        backgroundColor: \"#eee\",\n        padding: 12,\n        borderRadius: 8\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"#888\",\n          textAlign: \"center\"\n        },\n        children: \"Photo upload is available on mobile only.\"\n      })\n    }) : _jsx(TouchableOpacity, {\n      style: {\n        marginTop: 12,\n        backgroundColor: isPro ? \"#3498db\" : \"#ccc\",\n        padding: 12,\n        borderRadius: 8\n      },\n      onPress: isPro ? pickImage : undefined,\n      disabled: !isPro,\n      children: _jsx(Text, {\n        style: {\n          color: isPro ? \"white\" : \"#888\",\n          textAlign: \"center\"\n        },\n        children: \"Add Photos\"\n      })\n    }), photos.map(function (uri) {\n      return _jsx(Image, {\n        source: {\n          uri: uri\n        },\n        style: {\n          width: \"100%\",\n          height: 180,\n          marginTop: 10\n        }\n      }, uri);\n    }), !isPro && _jsxs(View, {\n      style: {\n        marginTop: 18,\n        backgroundColor: \"#FEF3C7\",\n        borderRadius: 8,\n        padding: 14\n      },\n      children: [_jsx(Text, {\n        style: {\n          color: \"#92400E\",\n          textAlign: \"center\",\n          fontSize: 15\n        },\n        children: \"Posting is a Pro feature. Upgrade to Pro to share posts and photos with the community.\"\n      }), _jsx(TouchableOpacity, {\n        style: {\n          marginTop: 10,\n          backgroundColor: \"#10B981\",\n          padding: 10,\n          borderRadius: 8\n        },\n        onPress: function onPress() {\n          return navigation.navigate && navigation.navigate(\"Subscription\");\n        },\n        children: _jsx(Text, {\n          style: {\n            color: \"white\",\n            textAlign: \"center\",\n            fontWeight: \"700\"\n          },\n          children: \"Upgrade to Pro\"\n        })\n      })]\n    }), _jsx(TouchableOpacity, {\n      style: {\n        marginTop: 20,\n        backgroundColor: isPro ? \"#2ecc71\" : \"#ccc\",\n        padding: 14,\n        borderRadius: 8\n      },\n      onPress: isPro ? submit : undefined,\n      disabled: !isPro,\n      children: _jsx(Text, {\n        style: {\n          color: isPro ? \"white\" : \"#888\",\n          fontSize: 18,\n          textAlign: \"center\"\n        },\n        children: \"Post\"\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","View","Text","TextInput","TouchableOpacity","Image","Platform","ScreenContainer","createPost","useAuth","useNavigation","jsx","_jsx","jsxs","_jsxs","ImagePicker","OS","require","CreatePostScreen","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","photos","setPhotos","_useAuth","isPro","navigation","pickImage","_pickImage","apply","arguments","_asyncToGenerator","result","launchImageLibraryAsync","allowsMultipleSelection","canceled","prev","concat","_toConsumableArray","assets","map","a","uri","submit","_submit","form","FormData","append","photo","response","fetch","blob","fileName","name","indexOf","type","goBack","children","style","fontSize","fontWeight","placeholder","multiline","value","onChangeText","marginTop","padding","backgroundColor","borderRadius","height","editable","color","textAlign","onPress","undefined","disabled","source","width","navigate"],"sources":["C:/GrowPathAI-UI/src/screens/CreatePostScreen.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { View, Text, TextInput, TouchableOpacity, Image, Platform } from \"react-native\";\nimport ScreenContainer from \"../components/ScreenContainer\";\nimport { createPost } from \"../api/posts\";\nimport { useAuth } from \"../context/AuthContext.js\";\nimport { useNavigation } from \"@react-navigation/native\";\nlet ImagePicker;\nif (Platform.OS !== \"web\") {\n  ImagePicker = require(\"expo-image-picker\");\n}\n\nexport default function CreatePostScreen() {\n  const [text, setText] = useState(\"\");\n  const [photos, setPhotos] = useState([]);\n  const { isPro } = useAuth();\n  const navigation = useNavigation();\n\n  async function pickImage() {\n    if (Platform.OS === \"web\") return;\n    const result = await ImagePicker.launchImageLibraryAsync({\n      allowsMultipleSelection: true\n    });\n    if (!result.canceled) {\n      setPhotos((prev) => [...prev, ...result.assets.map((a) => a.uri)]);\n    }\n  }\n\n  async function submit() {\n    const form = new FormData();\n    form.append(\"text\", text);\n\n    for (const photo of photos) {\n      // For web/TypeScript compatibility, use Blob and filename\n      if (Platform.OS === \"web\") {\n        const response = await fetch(photo);\n        const blob = await response.blob();\n        form.append(\"photos\", blob, photo.fileName || `photo.jpg`);\n      } else {\n        form.append(\"photos\", {\n          uri: photo,\n          name: `photo_${photos.indexOf(photo)}.jpg`,\n          type: \"image/jpeg\"\n        });\n      }\n    }\n\n    await createPost(form);\n    navigation.goBack();\n  }\n\n  return (\n    <ScreenContainer>\n      <Text style={{ fontSize: 22, fontWeight: \"700\" }}>Create Post</Text>\n\n      <TextInput\n        placeholder=\"Say something about your grow...\"\n        multiline\n        value={text}\n        onChangeText={setText}\n        style={{\n          marginTop: 12,\n          padding: 10,\n          backgroundColor: \"#eee\",\n          borderRadius: 8,\n          height: 120\n        }}\n        editable={isPro}\n      />\n\n      {Platform.OS === \"web\" ? (\n        <View\n          style={{ marginTop: 12, backgroundColor: \"#eee\", padding: 12, borderRadius: 8 }}\n        >\n          <Text style={{ color: \"#888\", textAlign: \"center\" }}>\n            Photo upload is available on mobile only.\n          </Text>\n        </View>\n      ) : (\n        <TouchableOpacity\n          style={{\n            marginTop: 12,\n            backgroundColor: isPro ? \"#3498db\" : \"#ccc\",\n            padding: 12,\n            borderRadius: 8\n          }}\n          onPress={isPro ? pickImage : undefined}\n          disabled={!isPro}\n        >\n          <Text style={{ color: isPro ? \"white\" : \"#888\", textAlign: \"center\" }}>\n            Add Photos\n          </Text>\n        </TouchableOpacity>\n      )}\n\n      {photos.map((uri) => (\n        <Image\n          key={uri}\n          source={{ uri }}\n          style={{ width: \"100%\", height: 180, marginTop: 10 }}\n        />\n      ))}\n\n      {!isPro && (\n        <View\n          style={{\n            marginTop: 18,\n            backgroundColor: \"#FEF3C7\",\n            borderRadius: 8,\n            padding: 14\n          }}\n        >\n          <Text style={{ color: \"#92400E\", textAlign: \"center\", fontSize: 15 }}>\n            Posting is a Pro feature. Upgrade to Pro to share posts and photos with the\n            community.\n          </Text>\n          <TouchableOpacity\n            style={{\n              marginTop: 10,\n              backgroundColor: \"#10B981\",\n              padding: 10,\n              borderRadius: 8\n            }}\n            onPress={() => navigation.navigate && navigation.navigate(\"Subscription\")}\n          >\n            <Text style={{ color: \"white\", textAlign: \"center\", fontWeight: \"700\" }}>\n              Upgrade to Pro\n            </Text>\n          </TouchableOpacity>\n        </View>\n      )}\n\n      <TouchableOpacity\n        style={{\n          marginTop: 20,\n          backgroundColor: isPro ? \"#2ecc71\" : \"#ccc\",\n          padding: 14,\n          borderRadius: 8\n        }}\n        onPress={isPro ? submit : undefined}\n        disabled={!isPro}\n      >\n        <Text\n          style={{ color: isPro ? \"white\" : \"#888\", fontSize: 18, textAlign: \"center\" }}\n        >\n          Post\n        </Text>\n      </TouchableOpacity>\n    </ScreenContainer>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}